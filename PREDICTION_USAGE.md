# âš½ è¶³çƒé¢„æµ‹å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨æ–°åˆ›å»ºçš„è¶³çƒæ¯”èµ›é¢„æµ‹å‘½ä»¤è¡Œå·¥å…·ã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶å | ç”¨é€” | å¹³å° |
|--------|------|------|
| `predict_match.py` | ä¸»é¢„æµ‹è„šæœ¬ | è·¨å¹³å° |
| `test_predictions.py` | æµ‹è¯•è„šæœ¬ | è·¨å¹³å° |
| `predict_example.bat` | Windowså¿«é€Ÿå¯åŠ¨å™¨ | Windows |
| `predict_example.sh` | Linux/Macå¿«é€Ÿå¯åŠ¨å™¨ | Linux/Mac |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºæœ¬é¢„æµ‹å‘½ä»¤

```bash
# åŸºæœ¬ç”¨æ³•
python predict_match.py --home_team "å¤šç‰¹è’™å¾·" --away_team "è’™ç‰¹é›·" --league "ä¸–ä¿±æ¯" --win_odds 1.57 --draw_odds 3.65 --lose_odds 4.60

# å¸¦è®©çƒçš„é¢„æµ‹
python predict_match.py --home_team "çš‡å®¶é©¬å¾·é‡Œ" --away_team "å·´å¡ç½—é‚£" --league "è¥¿ç”²" --win_odds 2.10 --draw_odds 3.40 --lose_odds 3.60 --handicap -0.5
```

### 2. ä½¿ç”¨å¿«é€Ÿå¯åŠ¨å™¨

#### Windowsç”¨æˆ·ï¼š
```cmd
# åŒå‡»è¿è¡Œæˆ–åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ
predict_example.bat
```

#### Linux/Macç”¨æˆ·ï¼š
```bash
# é¦–å…ˆæ·»åŠ æ‰§è¡Œæƒé™
chmod +x predict_example.sh

# è¿è¡Œè„šæœ¬
./predict_example.sh
```

## ğŸ“‹ å‘½ä»¤è¡Œå‚æ•°è¯¦è§£

### å¿…éœ€å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `--home_team` | ä¸»é˜Ÿåç§° | "çš‡å®¶é©¬å¾·é‡Œ" |
| `--away_team` | å®¢é˜Ÿåç§° | "å·´å¡ç½—é‚£" |
| `--league` | è”èµ›åç§° | "è¥¿ç”²" |
| `--win_odds` | ä¸»èƒœèµ”ç‡ | 2.10 |
| `--draw_odds` | å¹³å±€èµ”ç‡ | 3.40 |
| `--lose_odds` | å®¢èƒœèµ”ç‡ | 3.60 |

### å¯é€‰å‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|--------|------|
| `--handicap` | è®©çƒæ•° | 0 | -0.5 |
| `--output_json` | è¾“å‡ºJSONæ ¼å¼ | False | - |
| `--quiet` | é™é»˜æ¨¡å¼ | False | - |
| `--ml_only` | åªä½¿ç”¨MLæ¨¡å‹ | False | - |
| `--dl_only` | åªä½¿ç”¨DLæ¨¡å‹ | False | - |

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šä¸–ä¿±æ¯æ¯”èµ›
```bash
python predict_match.py \
  --home_team "å¤šç‰¹è’™å¾·" \
  --away_team "è’™ç‰¹é›·" \
  --league "ä¸–ä¿±æ¯" \
  --win_odds 1.57 \
  --draw_odds 3.65 \
  --lose_odds 4.60
```

**é¢„æœŸè¾“å‡ºï¼š**
```
âš½ === è¶³çƒæ¯”èµ›é¢„æµ‹å·¥å…· ===
ğŸ  ä¸»é˜Ÿ: å¤šç‰¹è’™å¾·
âœˆï¸  å®¢é˜Ÿ: è’™ç‰¹é›·
ğŸ† è”èµ›: ä¸–ä¿±æ¯
ğŸ’° èµ”ç‡: èƒœ1.57 å¹³3.65 è´Ÿ4.6

ğŸ”„ æ­£åœ¨åŠ è½½é¢„æµ‹æ¨¡å‹...
âœ… æœºå™¨å­¦ä¹ æ¨¡å‹åŠ è½½æˆåŠŸ
âœ… æ·±åº¦å­¦ä¹ æ¨¡å‹åŠ è½½æˆåŠŸ
ğŸ¤– æ­£åœ¨ä½¿ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹é¢„æµ‹...
ğŸ§  æ­£åœ¨ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹é¢„æµ‹...

ğŸ¤– === æœºå™¨å­¦ä¹ æ¨¡å‹é¢„æµ‹ç»“æœ ===
ğŸ† é¢„æµ‹ç»“æœ: ä¸»èƒœ

ğŸ“Š èƒœå¹³è´Ÿæ¦‚ç‡:
   ğŸ† ä¸»èƒœ: 65.2%
   ğŸ¤ å¹³å±€: 21.8%
   ğŸ’” å®¢èƒœ: 13.0%

âš½ æ€»è¿›çƒæ•°: 3 (åŸå§‹å€¼: 2.8)
ğŸ¯ é¢„æµ‹æ¯”åˆ†: 2:1
ğŸ“ˆ è¯¦ç»†è¿›çƒ: ä¸»é˜Ÿ2çƒ, å®¢é˜Ÿ1çƒ

ğŸ… å‰ä¸‰å¯èƒ½æ¯”åˆ†:
   1. 2:1 (18.5%)
   2. 3:1 (15.2%)
   3. 2:0 (12.8%)

ğŸ§  === æ·±åº¦å­¦ä¹ æ¨¡å‹é¢„æµ‹ç»“æœ ===
ğŸ† é¢„æµ‹ç»“æœ: ä¸»èƒœ

ğŸ“Š èƒœå¹³è´Ÿæ¦‚ç‡:
   ğŸ† ä¸»èƒœ: 62.8%
   ğŸ¤ å¹³å±€: 23.1%
   ğŸ’” å®¢èƒœ: 14.1%

âš½ æ€»è¿›çƒæ•°: 2-3 (åŸå§‹å€¼: 2.7)
ğŸ¯ é¢„æµ‹æ¯”åˆ†: 2:1

ğŸ… å‰ä¸‰å¯èƒ½æ¯”åˆ†:
   1. 2:1 (16.2%)
   2. 1:1 (14.8%)
   3. 2:0 (13.1%)

ğŸ” === æ¨¡å‹å¯¹æ¯”åˆ†æ ===
âœ… é¢„æµ‹ä¸€è‡´: ä¸¤æ¨¡å‹éƒ½é¢„æµ‹ ä¸»èƒœ

ğŸ“ˆ æ¦‚ç‡å¯¹æ¯”:
   ä¸»èƒœ: ML 65.2% vs DL 62.8% (å·®å¼‚2.4%)
   å¹³å±€: ML 21.8% vs DL 23.1% (å·®å¼‚1.3%)
   å®¢èƒœ: ML 13.0% vs DL 14.1% (å·®å¼‚1.1%)

âš½ è¿›çƒæ•°å¯¹æ¯”:
   MLæ¨¡å‹: 2.8çƒ
   DLæ¨¡å‹: 2.7çƒ
   å·®å¼‚: 0.1çƒ
   âœ… è¿›çƒæ•°é¢„æµ‹é«˜åº¦ä¸€è‡´

ğŸ’¡ ç»¼åˆå»ºè®®:
   ğŸ”¥ å¼ºçƒˆæ¨è: ä¸¤æ¨¡å‹é«˜ç½®ä¿¡åº¦ä¸€è‡´é¢„æµ‹
   âš½ è¿›çƒæ•°: å»ºè®®è€ƒè™‘å¤§çƒ (è¶…è¿‡2.5çƒ)

âœ… é¢„æµ‹å®Œæˆ! ç”¨æ—¶: 14:30:15

ğŸ“Œ å…è´£å£°æ˜: é¢„æµ‹ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•æ³¨å»ºè®®ã€‚è¯·ç†æ€§å¯¹å¾…ä½“è‚²åšå½©ã€‚
```

### ç¤ºä¾‹2ï¼šåªä½¿ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹
```bash
python predict_match.py \
  --home_team "æ‹œä»æ…•å°¼é»‘" \
  --away_team "å¤šç‰¹è’™å¾·" \
  --league "å¾·ç”²" \
  --win_odds 1.85 \
  --draw_odds 3.80 \
  --lose_odds 4.20 \
  --ml_only
```

### ç¤ºä¾‹3ï¼šJSONè¾“å‡ºæ ¼å¼
```bash
python predict_match.py \
  --home_team "å·´é»åœ£æ—¥è€³æ›¼" \
  --away_team "é©¬èµ›" \
  --league "æ³•ç”²" \
  --win_odds 1.45 \
  --draw_odds 4.20 \
  --lose_odds 6.50 \
  --output_json
```

**JSONè¾“å‡ºç¤ºä¾‹ï¼š**
```json
{
  "match_info": {
    "home_team": "å·´é»åœ£æ—¥è€³æ›¼",
    "away_team": "é©¬èµ›",
    "league": "æ³•ç”²",
    "win_odds": 1.45,
    "draw_odds": 4.2,
    "lose_odds": 6.5,
    "handicap": 0
  },
  "timestamp": "2024-03-15T14:30:15.123456",
  "predictions": {
    "ml_model": {
      "result": "win",
      "probabilities": {
        "win": 0.72,
        "draw": 0.18,
        "lose": 0.10
      },
      "total_goals": "3",
      "total_goals_raw": 3.2,
      "predicted_score": "2:0",
      "top_scores": [
        ["2:0", 0.22],
        ["3:1", 0.18],
        ["2:1", 0.16]
      ],
      "goals_prediction": {
        "home": 2,
        "away": 0,
        "total": 3
      }
    },
    "dl_model": {
      "result": "win",
      "probabilities": {
        "win": 0.69,
        "draw": 0.20,
        "lose": 0.11
      },
      "total_goals": "3",
      "total_goals_raw": 3.1,
      "predicted_score": "2:1",
      "top_scores": [
        ["2:1", 0.19],
        ["3:0", 0.17],
        ["2:0", 0.15]
      ]
    }
  },
  "comparison": {
    "result_consistent": true,
    "goals_difference": 0.1
  }
}
```

## ğŸ§ª æµ‹è¯•å·¥å…·

### è¿è¡Œæµ‹è¯•å¥—ä»¶
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
python test_predictions.py

# æˆ–é€šè¿‡å¿«é€Ÿå¯åŠ¨å™¨é€‰æ‹©é€‰é¡¹8
```

æµ‹è¯•å¥—ä»¶åŒ…å«ä»¥ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼š
1. ä¸–ä¿±æ¯æ¯”èµ›é¢„æµ‹
2. è¥¿ç”²æ¯”èµ›ï¼ˆå¸¦è®©çƒï¼‰
3. è‹±è¶…æ¯”èµ›
4. å¾·ç”²æ¯”èµ›ï¼ˆä»…MLæ¨¡å‹ï¼‰
5. æ„ç”²æ¯”èµ›ï¼ˆä»…DLæ¨¡å‹ï¼‰
6. æ³•ç”²æ¯”èµ›ï¼ˆJSONè¾“å‡ºï¼‰
7. å¸®åŠ©ä¿¡æ¯æ˜¾ç¤º

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ¨¡å‹æ–‡ä»¶è¦æ±‚
ç¡®ä¿ä»¥ä¸‹æ¨¡å‹æ–‡ä»¶å­˜åœ¨ï¼š
- `football_models.pkl` (æœºå™¨å­¦ä¹ æ¨¡å‹)
- `football_dl_model.pth` (æ·±åº¦å­¦ä¹ æ¨¡å‹)

### 2. ä¾èµ–é¡¹æ£€æŸ¥
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # éœ€è¦ Python 3.8+

# æ£€æŸ¥å¿…è¦çš„åŒ…
python -c "import pandas, numpy, sklearn, torch, xgboost, joblib"
```

### 3. è¾“å…¥éªŒè¯
- èµ”ç‡å¿…é¡»å¤§äº1.0
- çƒé˜Ÿåç§°å’Œè”èµ›åç§°æ”¯æŒä¸­æ–‡
- è®©çƒæ•°å¯ä»¥ä¸ºè´Ÿæ•°ï¼ˆå®¢é˜Ÿè®©çƒï¼‰

### 4. æœªçŸ¥ç±»åˆ«å¤„ç†
å¦‚æœè¾“å…¥çš„çƒé˜Ÿæˆ–è”èµ›åœ¨è®­ç»ƒæ•°æ®ä¸­ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šï¼š
- è‡ªåŠ¨é€‰æ‹©æœ€ç›¸ä¼¼çš„å·²çŸ¥ç±»åˆ«
- æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯
- é™ä½é¢„æµ‹ç½®ä¿¡åº¦

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. æ‰¹é‡é¢„æµ‹
åˆ›å»ºä¸€ä¸ªCSVæ–‡ä»¶åŒ…å«å¤šåœºæ¯”èµ›ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨å¾ªç¯ï¼š

```bash
# ç¤ºä¾‹ï¼šæ‰¹é‡é¢„æµ‹è„šæœ¬
while IFS=, read -r home away league w_odds d_odds l_odds h_cap
do
    echo "é¢„æµ‹: $home vs $away"
    python predict_match.py \
        --home_team "$home" \
        --away_team "$away" \
        --league "$league" \
        --win_odds "$w_odds" \
        --draw_odds "$d_odds" \
        --lose_odds "$l_odds" \
        --handicap "$h_cap" \
        --quiet \
        --output_json >> results.json
done < matches.csv
```

### 2. APIé›†æˆ
å¯ä»¥å°†è„šæœ¬é›†æˆåˆ°å…¶ä»–ç³»ç»Ÿä¸­ï¼š

```python
import subprocess
import json

def predict_match_api(home_team, away_team, league, win_odds, draw_odds, lose_odds, handicap=0):
    cmd = [
        'python', 'predict_match.py',
        '--home_team', home_team,
        '--away_team', away_team,
        '--league', league,
        '--win_odds', str(win_odds),
        '--draw_odds', str(draw_odds),
        '--lose_odds', str(lose_odds),
        '--handicap', str(handicap),
        '--output_json',
        '--quiet'
    ]
    
    result = subprocess.run(cmd, capture_output=True, text=True)
    if result.returncode == 0:
        return json.loads(result.stdout)
    else:
        raise Exception(f"é¢„æµ‹å¤±è´¥: {result.stderr}")

# ä½¿ç”¨ç¤ºä¾‹
prediction = predict_match_api(
    "çš‡å®¶é©¬å¾·é‡Œ", "å·´å¡ç½—é‚£", "è¥¿ç”²",
    2.10, 3.40, 3.60, -0.5
)
print(f"é¢„æµ‹ç»“æœ: {prediction['predictions']['ml_model']['result']}")
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| `ModuleNotFoundError` | ç¼ºå°‘ä¾èµ–åŒ… | `pip install -r requirements.txt` |
| `FileNotFoundError` | æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨ | å…ˆè®­ç»ƒæ¨¡å‹æˆ–ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹ |
| `èµ”ç‡å¿…é¡»å¤§äº1` | è¾“å…¥çš„èµ”ç‡æ— æ•ˆ | æ£€æŸ¥å¹¶ä¿®æ­£èµ”ç‡æ•°å€¼ |
| `é¢„æµ‹å¤±è´¥` | è¾“å…¥æ•°æ®æ ¼å¼é”™è¯¯ | æ£€æŸ¥çƒé˜Ÿåç§°å’Œæ•°å€¼æ ¼å¼ |

### æ—¥å¿—è°ƒè¯•
```bash
# å¯ç”¨è¯¦ç»†è¾“å‡º
python predict_match.py [å‚æ•°] --verbose

# æŸ¥çœ‹å®Œæ•´é”™è¯¯ä¿¡æ¯
python predict_match.py [å‚æ•°] 2>&1 | tee error.log
```

## ğŸ“š æ›´å¤šèµ„æº

- æŸ¥çœ‹ä¸»è¦åŠŸèƒ½æ–‡æ¡£: `README.md`
- äº†è§£æ¨¡å‹åŸç†: `football_ml_predictor.py` å’Œ `football_dl_predictor.py`
- æ•°æ®è·å–: `football_data_crawler.py`
- æ¨¡å‹è®­ç»ƒ: `retrain_models.py`

---

**âš½ ç¥æ‚¨é¢„æµ‹å‡†ç¡®ï¼ŒæŠ•æ³¨ç†æ€§ï¼** 